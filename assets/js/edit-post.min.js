function RP4WP_Related_Manager(e){this.container=e,this.init=function(){this.bind(),this.make_sortable()},this.bind=function(){var e=this;jQuery(this.container).find(".rp4wp_table_manage .trash a").bind("click",function(){e.delete_child(this)})},this.fix_helper=function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t},this.make_sortable=function(){var a=this,r=jQuery(this.container).find(".sortable tbody");r.sortable({helper:a.fix_helper,update:function(e,t){jQuery(a.container).parent().parent().find("h3").eq(0).append(jQuery("<img>").attr("src",jQuery("#rp4wp-dir-img").val()+"ajax-loader.gif").addClass("rp4wp_ajaxloader")),opts={url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"rp4wp_related_sort",rp4wp_items:r.sortable("toArray").toString(),nonce:jQuery(a.container).find("#rp4wp-ajax-nonce").val()},success:function(e){jQuery(".rp4wp_ajaxloader").remove()},error:function(e,t,a){jQuery(".rp4wp_ajaxloader").remove()}},jQuery.ajax(opts)}})},this.delete_child=function(t){var e;confirm(rp4wp_js.confirm_delete_related_post)&&(e={url:ajaxurl,type:"POST",async:!0,cache:!1,dataType:"json",data:{action:"rp4wp_delete_link",id:jQuery(t).closest("tr").attr("id"),nonce:jQuery(this.container).find("#rp4wp-ajax-nonce").val()},success:function(e){jQuery(t).closest("tr").fadeTo("fast",0).slideUp(function(){jQuery(this).remove()})},error:function(e,t,a){}},jQuery.ajax(e))},this.init()}jQuery(function(e){e.each(e(".rp4wp_mb_manage"),function(e,t){new RP4WP_Related_Manager(t)})});